import{a as O,b as U}from"./chunk-N5XTIJ6G.js";import{a as G,b as D}from"./chunk-PSLK5BU3.js";import{a as j,m as M}from"./chunk-KHZGBHNT.js";import{h as R}from"./chunk-TWAQUCXP.js";import{n as Q}from"./chunk-IG6CRRGH.js";import{$ as E,Db as I,Eb as z,Fb as A,Gb as h,Hb as b,Ib as k,La as y,Ob as B,Pa as c,Qb as L,Ub as g,Wb as f,Y as x,_a as F,eb as C,gb as p,ja as m,ka as _,kb as S,kc as $,la as w,lb as P,mb as T,nb as W,ob as n,pb as s,qb as l,tb as u,xb as v,yb as d}from"./chunk-63XWG6HK.js";import"./chunk-CWTPBX7D.js";var N=["lazyLoading"],q=r=>["/details",r];function H(r,a){if(r&1){let t=u();n(0,"div",19),v("click",function(){m(t);let e=d().$implicit,o=d();return _(o.removeProductFromWishlist(e.id))}),l(1,"i",20),s()}}function J(r,a){if(r&1){let t=u();n(0,"div",19),v("click",function(){m(t);let e=d().$implicit,o=d();return _(o.addProductToWishlist(e._id))}),l(1,"i",21),s()}}function K(r,a){if(r&1){let t=u();n(0,"div",4)(1,"a"),l(2,"img",5),s(),n(3,"div",6)(4,"a",7)(5,"h5",8),h(6),g(7,"trimText"),s()(),l(8,"app-rating",9),n(9,"div",10)(10,"span",11),h(11),g(12,"currency"),s(),n(13,"div",12),C(14,H,2,0,"div",13)(15,J,2,0),n(16,"div",14),v("click",function(){let e=m(t).$implicit,o=d();return _(o.addToCart(e.id))}),l(17,"i",15),s()()(),n(18,"a",16),h(19," Read more "),w(),n(20,"svg",17),l(21,"path",18),s()()()()}if(r&2){let t=a.$implicit,i=d();c(2),p("src",t.imageCover,y)("alt",t.title),c(4),k(" ",f(7,7,t.description,2),""),c(2),p("ratingAvg",t.ratingsAverage),c(3),b(f(12,10,t.price,"GBP")),c(3),S(14,i._WishlistService.userWishList().has(t._id)?14:i._WishlistService.userWishList().has(t._id)===!1?15:-1),c(4),p("routerLink",L(13,q,t._id))}}function X(r,a){if(r&1){let t=u();n(0,"div",19),v("click",function(){m(t);let e=d().$implicit,o=d(2);return _(o.removeProductFromWishlist(e.id))}),l(1,"i",20),s()}}function Y(r,a){if(r&1){let t=u();n(0,"div",19),v("click",function(){m(t);let e=d().$implicit,o=d(2);return _(o.addProductToWishlist(e._id))}),l(1,"i",21),s()}}function Z(r,a){if(r&1){let t=u();n(0,"div",4)(1,"a"),l(2,"img",5),s(),n(3,"div",6)(4,"a",7)(5,"h5",8),h(6),g(7,"trimText"),s()(),l(8,"app-rating",9),n(9,"div",10)(10,"span",11),h(11),g(12,"currency"),s(),n(13,"div",12),C(14,X,2,0,"div",13)(15,Y,2,0),n(16,"div",14),v("click",function(){let e=m(t).$implicit,o=d(2);return _(o.addToCart(e.id))}),l(17,"i",15),s()()(),n(18,"a",16),h(19," Read more "),w(),n(20,"svg",17),l(21,"path",18),s()()()()}if(r&2){let t=a.$implicit,i=d(2);c(2),p("src",t.imageCover,y)("alt",t.title),c(4),k(" ",f(7,7,t.description,2),""),c(2),p("ratingAvg",t.ratingsAverage),c(3),b(f(12,10,t.price,"GBP")),c(3),S(14,i._WishlistService.userWishList().has(t._id)?14:i._WishlistService.userWishList().has(t._id)===!1?15:-1),c(4),p("routerLink",L(13,q,t._id))}}function ee(r,a){if(r&1&&(n(0,"div",3),T(1,Z,22,15,"div",4,P),s()),r&2){let t=d();c(),W(t.products().slice(12))}}var ue=(()=>{let a=class a{constructor(){this._ProductsService=x(O),this._CartService=x(j),this._ToastrService=x(M),this._WishlistService=x(G),this.WishlistCount=$(()=>this._WishlistService.userWishList()),this.isLazyLoaded=!1,this.products=F([])}ngOnInit(){this.getAllProducts(),this._WishlistService.loadWishlist(),console.log(Array.from(this._WishlistService.userWishList()).length)}getAllProducts(){this._ProductsService.getAllProducts().subscribe({next:i=>{console.log(i.data),this.products.set(i.data)}})}getProductById(i){this._ProductsService.getSpecificProduct(i).subscribe({next:e=>{console.log(e)}})}ngOnDestroy(){}ngAfterViewInit(){let i=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&(this.isLazyLoaded=!0,i.unobserve(this.lazyLoadTrigger.nativeElement))})});i.observe(this.lazyLoadTrigger.nativeElement)}addToCart(i){this._CartService.addToCart(i).subscribe({next:e=>{console.log(e),this._ToastrService.success("Product added to cart"),this._CartService.cartQuantity.set(e.numOfCartItems)}})}addProductToWishlist(i){this._WishlistService.addProductToWishlist(i).subscribe({next:e=>{console.log(e),this._ToastrService.success(e.message),this._WishlistService.wishListQuantity.set(e.data.length),this._WishlistService.loadWishlist()}})}removeProductFromWishlist(i){this._WishlistService.removeProductFromWishlist(i).subscribe({next:e=>{console.log(e),this._ToastrService.success(e.message),this._WishlistService.wishListQuantity.set(e.data.length),this._WishlistService.loadWishlist()}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=E({type:a,selectors:[["app-products"]],viewQuery:function(e,o){if(e&1&&I(N,5),e&2){let V;z(V=A())&&(o.lazyLoadTrigger=V.first)}},standalone:!0,features:[B],decls:8,vars:1,consts:[["lazyLoading",""],[1,"my-5"],[1,"w-[75%]","mx-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-8","w-[80%]","mx-auto","lg:w-full"],[1,"group","hover:scale-[104%]","transition-all","hover:shadow-md","duration-500","bg-white","border","border-gray-200","rounded-lg","shdow"],[1,"pb-3","rounded-t-lg","w-full",3,"src","alt"],[1,"px-5","pb-5"],["href","#"],[1,"text-xl","font-semibold","tracking-tight","text-gray-900","dark:text-white"],[3,"ratingAvg"],[1,"flex","items-center","justify-between"],[1,"text-3xl","md:text-xl","font-bold","text-gray-900","dark:text-white"],[1,"flex","items-center","gap-3"],[1,"wishlist-icon","cr","ms-3"],[1,"button","flex","justify-center","items-center","bg-gray-200","border","border-gray-400","rounded-md","w-[fit-content]","px-4","py-6","lg:py-5","lg:px-3",3,"click"],[1,"fa-solid","fa-cart-plus","text-gray-400","fa-2xl","lg:fa-xl"],[1,"hidden","group-hover:inline-flex","items-center","px-3","py-2","text-sm","font-medium","text-center","text-white","bg-blue-700","rounded-lg","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300",3,"routerLink"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 10",1,"rtl:rotate-180","w-3.5","h-3.5","ms-2"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 5h12m0 0L9 1m4 4L9 9"],[1,"wishlist-icon","cr","ms-3",3,"click"],[1,"fas","fa-heart","text-red-500","fa-2xl"],[1,"far","fa-heart","text-red-500","fa-2xl"]],template:function(e,o){e&1&&(n(0,"section",1)(1,"div",2)(2,"div",3),T(3,K,22,15,"div",4,P),s(),l(5,"div",null,0),C(7,ee,3,0,"div",3),s()()),e&2&&(c(3),W(o.products().slice(0,12)),c(4),S(7,o.isLazyLoaded?7:-1))},dependencies:[D,Q,U,R]});let r=a;return r})();export{ue as ProductsComponent};
