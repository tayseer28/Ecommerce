import{a as G}from"./chunk-PLG2AT53.js";import{c as $,d as R}from"./chunk-4NDHNKT4.js";import{a as j}from"./chunk-XPO3WYBB.js";import{a as z}from"./chunk-N3K24JAS.js";import{a as M,m as A}from"./chunk-KHZGBHNT.js";import{h as Y}from"./chunk-TWAQUCXP.js";import{n as N}from"./chunk-IG6CRRGH.js";import{$ as P,Gb as l,Hb as p,Ib as g,Jb as V,La as T,Ob as Q,Pa as n,Pb as D,Qa as k,Qb as y,Ub as u,Vb as m,Wb as w,Y as v,_a as b,eb as I,gb as f,ja as C,ka as h,kb as B,mb as E,nb as F,ob as o,pb as a,qb as S,tb as L,xb as x,yb as _}from"./chunk-63XWG6HK.js";import{e as O}from"./chunk-CWTPBX7D.js";var d=O(z());var U=(r,s)=>s.product.id,q=()=>["/products"],H=r=>["/orders",r],J=r=>["/details",r];function K(r,s){r&1&&(o(0,"div",6)(1,"p",7),l(2),u(3,"translate"),a(),o(4,"button")(5,"a",8),l(6),u(7,"translate"),a()()()),r&2&&(n(2),p(m(3,3,"cart.empty")),n(3),f("routerLink",D(7,q)),n(),p(m(7,5,"cart.shopNow")))}function W(r,s){if(r&1){let c=L();o(0,"div",11),S(1,"img",12),a(),o(2,"div",13)(3,"div",14)(4,"div",15)(5,"h3",16),l(6),a(),o(7,"p",17),l(8),u(9,"currency"),a(),o(10,"span",18),x("click",function(){let t=C(c).$implicit,e=_(2);return h(e.removeSpecificProduct(t.product.id))}),S(11,"i",19),l(12),u(13,"translate"),a()(),o(14,"div",20)(15,"i",21),x("click",function(){let t=C(c).$implicit,e=_(2);return h(e.updateProductQuantity(t.product.id,t.count-1))}),a(),o(16,"span",22),l(17),a(),o(18,"i",23),x("click",function(){let t=C(c).$implicit,e=_(2);return h(e.updateProductQuantity(t.product.id,t.count+1))}),a()()()()}if(r&2){let c=s.$implicit;f("routerLink",y(12,J,c.product._id)),n(),f("src",c.product.imageCover,T)("alt",c.product.title),n(5),p(c.product.title),n(2),p(w(9,7,c.price,"GBP")),n(4),g(" ",m(13,10,"cart.remove"),""),n(5),p(c.count)}}function X(r,s){if(r&1&&(o(0,"div",9),E(1,W,19,14,null,null,U),a(),o(3,"button",10),l(4),u(5,"translate"),a()),r&2){let c=_();n(),F(c.cartProducts().products),n(2),f("routerLink",y(4,H,c.cartProducts()._id)),n(),p(m(5,2,"cart.order"))}}var ut=(()=>{let s=class s{constructor(i){this._FlowbiteService=i,this._CartService=v(M),this._ToastrService=v(A),this._NgxSpinnerService=v(G),this.cartProducts=b({}),this.totalItems=b(0)}ngOnInit(){this.getCart(),this._FlowbiteService.loadFlowbite(()=>{})}getCart(){this._CartService.getCartProducts().subscribe({next:i=>{i.status==="success"&&(console.log(i),console.log(i.data),this.cartProducts.set(i.data),this.totalItems.set(this.cartProducts().products.length),console.log(this.cartProducts()))}})}removeSpecificProduct(i){d.default.fire({title:"Are you sure?",text:"Do you really want to remove this product from your cart?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, keep it"}).then(t=>{t.isConfirmed?this._CartService.deleteCartProduct(i).subscribe({next:e=>{e.status==="success"&&(this.cartProducts.set(e.data),this._ToastrService.success("Product removed from cart","Success"),this._CartService.cartQuantity.set(e.numOfCartItems),d.default.fire("Removed!","The product has been removed from your cart.","success"))},error:e=>{d.default.fire("Error","There was an issue removing the product. Please try again.","error")}}):t.dismiss===d.default.DismissReason.cancel&&d.default.fire("Cancelled","The product remains in your cart.","error")})}updateProductQuantity(i,t){this._CartService.updateProductQuantity(i,t).subscribe({next:e=>{console.log(e),e.status==="success"&&this.cartProducts.set(e.data)}})}clearCart(){d.default.fire({title:"Are you sure?",text:"You are about to clear your cart. This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, clear it!",cancelButtonText:"No, keep it"}).then(i=>{i.isConfirmed?this._CartService.clearCart().subscribe({next:t=>{t.message==="success"&&(this.cartProducts.set({}),this._CartService.cartQuantity.set(0),d.default.fire("Cleared!","Your cart has been cleared.","success"))},error:t=>{d.default.fire("Error","There was an issue clearing your cart. Please try again.","error")}}):i.dismiss===d.default.DismissReason.cancel&&d.default.fire("Cancelled","Your cart is safe!")})}};s.\u0275fac=function(t){return new(t||s)(k(j))},s.\u0275cmp=P({type:s,selectors:[["app-cart"]],standalone:!0,features:[Q],decls:16,vars:15,consts:[[1,"my-4"],[1,"w-[75%]","mx-auto"],[1,"text-main","h2","font-bold","text-center"],[1,"text-sm"],[1,"text-red-600","my-3","font-semibold"],["type","button",1,"text-white","bg-red-700","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center",3,"click"],[1,"flex","flex-col","gap-4"],[1,"text-center","text-red-600","font-semibold"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","focus:outline-none",3,"routerLink"],[1,"grid","grid-cols-1","sm:grid-cols-12","items-center","gap-3"],["type","button",1,"mt-4","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","focus:outline-none",3,"routerLink"],[1,"sm:col-span-2","lg:col-span-1","mt-4","product","cr",3,"routerLink"],[1,"w-full",3,"src","alt"],[1,"sm:col-span-10","lg:col-span-11","border","rounded-md","p-3","sm:border-0","sm:p-0"],[1,"flex","justify-between","items-center"],[1,"details","mb-3"],[1,"text-[16px]"],[1,"text-main"],[1,"cr","hover:text-[16px]","font-bold","text-[14px]","transition-all","duration-300","active:scale-95","active:text-red-900",3,"click"],[1,"fa-solid","fa-trash","text-red-700"],[1,"actions","flex","items-center","gap-2"],[1,"cr","fa-solid","fa-minus","text-main","fa-xl",3,"click"],[1,"p-1","rounded-md","border-2","border-[--main-color]"],[1,"cr","fa-solid","fa-plus","text-main","fa-xl",3,"click"]],template:function(t,e){t&1&&(o(0,"section",0)(1,"div",1)(2,"h1",2),l(3),u(4,"translate"),o(5,"span",3),l(6),a()(),o(7,"p",4),l(8),u(9,"translate"),u(10,"currency"),a(),o(11,"button",5),x("click",function(){return e.clearCart()}),l(12),u(13,"translate"),a(),I(14,K,8,8,"div",6)(15,X,6,6),a()()),t&2&&(n(3),p(m(4,6,"cart.title")),n(3),g(" (",e.totalItems(),")"),n(2),V("",m(9,8,"cart.totalPrice"),": ",w(10,10,e.cartProducts().totalCartPrice,"GBP"),""),n(4),g(" ",m(13,13,"cart.clear")," "),n(2),B(14,e.totalItems()===0?14:15))},dependencies:[N,Y,R,$]});let r=s;return r})();export{ut as CartComponent};
