import{a as T,b as c,c as V,d as M,h as q,i as N,j as L,k as A,l as G,n as R}from"./chunk-M3OTGQMH.js";import{a as k}from"./chunk-IPFK77XX.js";import{a as F}from"./chunk-XPO3WYBB.js";import"./chunk-N3K24JAS.js";import{g as P}from"./chunk-TWAQUCXP.js";import"./chunk-IG6CRRGH.js";import{$ as S,Gb as s,Hb as y,Ob as E,Pa as l,Y as _,eb as d,gb as f,ja as g,ka as x,kb as m,la as h,ma as v,ob as o,pb as r,qb as p,tb as b,xb as C,yb as u}from"./chunk-63XWG6HK.js";import"./chunk-CWTPBX7D.js";function B(e,n){e&1&&(o(0,"p",12),s(1,"Required"),r())}function z(e,n){e&1&&(o(0,"p",12),s(1,"Enter Valid Email "),r())}function D(e,n){if(e&1&&(o(0,"div",9),d(1,B,2,0,"p",12)(2,z,2,0),r()),e&2){let i,t=u(2);l(),m(1,(i=t.verifyEmail.get("email"))!=null&&i.getError("required")?1:(i=t.verifyEmail.get("email"))!=null&&i.getError("email")?2:-1)}}function I(e,n){e&1&&(o(0,"span"),p(1,"i",13),r())}function H(e,n){if(e&1&&(o(0,"p",11),s(1),r()),e&2){let i=u(2);l(),y(i.errorMsg)}}function Z(e,n){if(e&1){let i=b();o(0,"form",2),C("ngSubmit",function(){g(i);let a=u();return x(a.verifyEmailSubmit())}),o(1,"div",3),p(2,"input",4),o(3,"label",5),h(),o(4,"svg",6),p(5,"path",7)(6,"path",8),r(),s(7," Email address "),r(),d(8,D,3,1,"div",9),r(),v(),o(9,"button",10),d(10,I,2,0,"span"),s(11," Submit "),r(),d(12,H,2,1,"p",11),r()}if(e&2){let i,t=u();f("formGroup",t.verifyEmail),l(8),m(8,(i=t.verifyEmail.get("email"))!=null&&i.errors&&((i=t.verifyEmail.get("email"))!=null&&i.touched)?8:-1),l(),f("disabled",t.verifyEmail.invalid),l(),m(10,t.isLoading?10:-1),l(2),m(12,t.errorMsg?12:-1)}}function $(e,n){e&1&&(o(0,"p",12),s(1,"Required"),r())}function j(e,n){e&1&&(o(0,"p",12),s(1,"code must be 6 digits "),r())}function O(e,n){if(e&1&&(o(0,"div",9),d(1,$,2,0,"p",12)(2,j,2,0),r()),e&2){let i,t=u(2);l(),m(1,(i=t.verifyCode.get("resetCode"))!=null&&i.getError("required")?1:(i=t.verifyCode.get("resetCode"))!=null&&i.getError("pattern")?2:-1)}}function J(e,n){e&1&&(o(0,"span"),p(1,"i",13),r())}function K(e,n){if(e&1&&(o(0,"p",17),s(1),r()),e&2){let i=u(2);l(),y(i.errorMsg)}}function Q(e,n){if(e&1){let i=b();o(0,"form",14),C("ngSubmit",function(){g(i);let a=u();return x(a.verifyCodeSubmit())}),o(1,"div",3),p(2,"input",15),o(3,"label",16),s(4," your code "),r(),d(5,O,3,1,"div",9),r(),o(6,"button",10),s(7," Submit "),d(8,J,2,0,"span"),r(),d(9,K,2,1,"p",17),r()}if(e&2){let i,t=u();f("formGroup",t.verifyCode),l(5),m(5,(i=t.verifyCode.get("resetCode"))!=null&&i.errors&&((i=t.verifyCode.get("resetCode"))!=null&&i.touched)?5:-1),l(),f("disabled",t.verifyCode.invalid),l(2),m(8,t.isLoading?8:-1),l(),m(9,t.errorMsg?9:-1)}}function U(e,n){e&1&&(o(0,"p",12),s(1,"Required"),r())}function W(e,n){e&1&&(o(0,"p",12),s(1,"Enter Valid Email "),r())}function X(e,n){if(e&1&&(o(0,"div",9),d(1,U,2,0,"p",12)(2,W,2,0),r()),e&2){let i,t=u(2);l(),m(1,(i=t.resetPassword.get("email"))!=null&&i.getError("required")?1:(i=t.resetPassword.get("email"))!=null&&i.getError("email")?2:-1)}}function Y(e,n){e&1&&(o(0,"p",12),s(1,"Required"),r())}function ee(e,n){e&1&&(o(0,"p",12),s(1,"password must start with upperCase then from 6 to more any chars"),r())}function te(e,n){if(e&1&&(o(0,"div",9),d(1,Y,2,0,"p",12)(2,ee,2,0),r()),e&2){let i,t=u(2);l(),m(1,(i=t.resetPassword.get("newPassword"))!=null&&i.getError("required")?1:(i=t.resetPassword.get("newPassword"))!=null&&i.getError("pattern")?2:-1)}}function ie(e,n){if(e&1){let i=b();o(0,"form",14),C("ngSubmit",function(){g(i);let a=u();return x(a.setNewPassSubmit())}),o(1,"div",3),p(2,"input",18),o(3,"label",5),h(),o(4,"svg",6),p(5,"path",7)(6,"path",8),r(),s(7," Email address "),r(),d(8,X,3,1,"div",9),r(),v(),o(9,"div",3),p(10,"input",19),o(11,"label",20),s(12," New Password "),r(),d(13,te,3,1,"div",9),r(),o(14,"button",10),s(15,"Submit"),r()()}if(e&2){let i,t,a=u();f("formGroup",a.resetPassword),l(8),m(8,(i=a.resetPassword.get("email"))!=null&&i.errors&&((i=a.resetPassword.get("email"))!=null&&i.touched)?8:-1),l(5),m(13,(t=a.resetPassword.get("newPassword"))!=null&&t.errors&&((t=a.resetPassword.get("newPassword"))!=null&&t.touched)?13:-1),l(),f("disabled",a.resetPassword.invalid)}}var ue=(()=>{let n=class n{constructor(){this._FlowbitService=_(F),this._FormBuilder=_(G),this._AuthService=_(k),this._Router=_(P),this.isLoading=!1,this.errorMsg="",this.successMsg="",this.step=1,this.verifyEmail=this._FormBuilder.group({email:[null,[c.required,c.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[c.required,c.pattern(/^[0-9]{6}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[c.required,c.email]],newPassword:[null,[c.required,c.pattern(/^[A-Z].{5,}$/)]]})}ngOnInit(){this._FlowbitService.loadFlowbite(()=>{})}verifyEmailSubmit(){this.isLoading=!0;let t=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(t),this._AuthService.setEmailForgetPass(this.verifyEmail.value).subscribe({next:a=>{a.statusMsg==="success"&&(this.successMsg=a.statusMsg,this.errorMsg="",this.isLoading=!1,this.step=2)},error:a=>{this.errorMsg=a.error.message,console.log(a),this.isLoading=!1}})}verifyCodeSubmit(){this.isLoading=!0,this._AuthService.setCodeForgetPass(this.verifyCode.value).subscribe({next:t=>{t.status==="Success"&&(this.successMsg=t.status,this.errorMsg="",this.step=3)},error:t=>{this.errorMsg=t.error.message,console.log(t),this.isLoading=!1}}),this.isLoading=!1}setNewPassSubmit(){this._AuthService.setNewPass(this.resetPassword.value).subscribe({next:t=>{localStorage.setItem("token",t.token),this._AuthService.saveToken(),this._Router.navigate(["/home"])}})}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=S({type:n,selectors:[["app-forget-password"]],standalone:!0,features:[E],decls:6,vars:1,consts:[[1,"text-main","h2","max-w-md","mx-auto","mb-5"],[1,"max-w-md","mx-auto","bg-main-light","px-5","py-7",3,"formGroup"],[1,"max-w-md","mx-auto","bg-main-light","px-5","py-7",3,"ngSubmit","formGroup"],[1,"relative","z-0","w-full","mb-5","group"],["type","email","name","floating_email","id","floating_email","placeholder"," ","required","","formControlName","email",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_email",1,"flex","items-center","gap-2","peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 16",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["d","m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z"],["d","M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z"],[1,"custom-alert","mt-3"],["type","submit",1,"text-white","btn-main","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"disabled"],[1,"bg-red-50","border","mt-4","border-red-500","text-red-900","placeholder-red-700","text-sm","rounded-lg","focus:ring-red-500","dark:bg-gray-700","focus:border-red-500","block","w-full","p-2.5"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],[1,"max-w-md","mx-auto","bg-main-light","px-5","py-7","mt-5",3,"ngSubmit","formGroup"],["type","text","name","floating_code","id","floating_code","placeholder"," ","required","","formControlName","resetCode",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_code",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"custom-alert","m-0"],["readonly","","type","email","name","floating_email","id","floating_email","placeholder"," ","required","","formControlName","email",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["type","password","name","floating_newPassword","id","floating_newPassword","placeholder"," ","required","","formControlName","newPassword",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_newPassword",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"]],template:function(a,w){a&1&&(o(0,"section")(1,"h1",0),s(2,"Forget Password: "),r(),d(3,Z,13,5,"form",1)(4,Q,10,5)(5,ie,16,4),r()),a&2&&(l(3),m(3,w.step==1?3:w.step==2?4:w.step==3?5:-1))},dependencies:[R,q,T,V,M,A,N,L]});let e=n;return e})();export{ue as ForgetPasswordComponent};
