import{a as G}from"./chunk-MQLL3WSE.js";import{a as q,b as h,c as F,d as N,h as A,i as R,j as z,k as I,l as L,n as D}from"./chunk-M3OTGQMH.js";import{e as T}from"./chunk-TWAQUCXP.js";import{h as M}from"./chunk-IG6CRRGH.js";import{$ as E,Gb as p,Hb as S,Ob as k,Pa as s,Rb as C,Y as v,eb as m,gb as _,kb as c,ob as n,pb as l,qb as b,xb as O,yb as y}from"./chunk-63XWG6HK.js";import"./chunk-CWTPBX7D.js";var w=(t,o)=>({"is-valid":t,"is-invalid":o});function V(t,o){t&1&&(n(0,"p",12),p(1,"Required"),l())}function Z(t,o){t&1&&(n(0,"p",12),p(1,"accept only egypt phone numbers"),l())}function $(t,o){if(t&1&&(n(0,"div",6),m(1,V,2,0,"p",12)(2,Z,2,0),l()),t&2){let i,r=y();s(),c(1,(i=r.orders.get("phone"))!=null&&i.getError("required")?1:(i=r.orders.get("phone"))!=null&&i.getError("pattern")?2:-1)}}function j(t,o){t&1&&(n(0,"p",12),p(1,"Required"),l())}function B(t,o){t&1&&(n(0,"p",12),p(1,"City name can only contain letters, spaces, or hyphens (e.g., New York, San-Francisco)."),l())}function Y(t,o){if(t&1&&(n(0,"div",6),m(1,j,2,0,"p",12)(2,B,2,0),l()),t&2){let i,r=y();s(),c(1,(i=r.orders.get("city"))!=null&&i.getError("required")?1:(i=r.orders.get("city"))!=null&&i.getError("pattern")?2:-1)}}function H(t,o){t&1&&(n(0,"span"),b(1,"i",13),l())}function J(t,o){if(t&1&&(n(0,"p",10),p(1),l()),t&2){let i=y();s(),S(i.errorMsg)}}function K(t,o){if(t&1&&(n(0,"p",11),p(1),l()),t&2){let i=y();s(),S(i.successMsg)}}var ne=(()=>{let o=class o{constructor(){this._ActivatedRoute=v(T),this._OrdersService=v(G),this.cartId="",this.isLoading=!1,this.errorMsg="",this.successMsg="",this.orders=new L().group({details:[null,h.required],phone:[null,[h.required,h.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[h.required,h.pattern(/^[a-zA-Z]+(?:[\s-][a-zA-Z]+)*$/)]]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:r=>{this.cartId=r.get("id")},error:r=>{console.log(r)}})}orderSubmit(){this.isLoading=!0,this.orders.valid?this._OrdersService.checkOut(this.cartId,this.orders.value).subscribe({next:r=>{console.log(r),r.status==="success"&&(this.isLoading=!1,this.errorMsg="",this.successMsg=r.status,window.open(r.session.url,"_self"))},error:r=>{console.log(r),this.isLoading=!1,this.errorMsg=r.error.status}}):this.orders.markAllAsTouched()}};o.\u0275fac=function(x){return new(x||o)},o.\u0275cmp=E({type:o,selectors:[["app-orders"]],standalone:!0,features:[k],decls:20,vars:18,consts:[[1,"max-w-lg","mx-auto",3,"ngSubmit","formGroup"],[1,"relative","z-0","w-full","mb-5","group"],["formControlName","details","name","details","id","floating_details","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer",3,"ngClass"],["for","floating_details",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","phone","type","tel","name","floating_phone","id","floating_phone","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer",3,"ngClass"],["for","floating_phone",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"custom-alert","mt-3","shadow-transparent"],["formControlName","city","type","text","name","floating_city","id","floating_city","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer",3,"ngClass"],["for","floating_city",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center"],[1,"custom-alert","m-0"],[1,"bg-green-50","border","border-green-500","text-green-900","dark:text-green-400","placeholder-green-700","text-sm","rounded-lg","p-2.5","m-2","w-full"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(x,e){if(x&1&&(n(0,"form",0),O("ngSubmit",function(){return e.orderSubmit()}),n(1,"div",1),b(2,"textarea",2),n(3,"label",3),p(4,"product details..."),l()(),n(5,"div",1),b(6,"input",4),n(7,"label",5),p(8,"phone"),l(),m(9,$,3,1,"div",6),l(),n(10,"div",1),b(11,"input",7),n(12,"label",8),p(13,"address"),l(),m(14,Y,3,1,"div",6),l(),n(15,"button",9),p(16," Check Out "),m(17,H,2,0,"span"),l(),m(18,J,2,1,"p",10)(19,K,2,1,"p",11),l()),x&2){let a,d,g,u,f;_("formGroup",e.orders),s(2),_("ngClass",C(9,w,!((a=e.orders.get("name"))!=null&&a.errors)&&(((a=e.orders.get("name"))==null?null:a.touched)||((a=e.orders.get("name"))==null?null:a.dirty)),((a=e.orders.get("name"))==null?null:a.errors)&&(((a=e.orders.get("name"))==null?null:a.touched)||((a=e.orders.get("name"))==null?null:a.dirty)))),s(4),_("ngClass",C(12,w,!((d=e.orders.get("phone"))!=null&&d.errors)&&(((d=e.orders.get("phone"))==null?null:d.touched)||((d=e.orders.get("phone"))==null?null:d.dirty)),((d=e.orders.get("phone"))==null?null:d.errors)&&(((d=e.orders.get("phone"))==null?null:d.touched)||((d=e.orders.get("phone"))==null?null:d.dirty)))),s(3),c(9,(g=e.orders.get("phone"))!=null&&g.errors&&((g=e.orders.get("phone"))!=null&&g.touched||(g=e.orders.get("phone"))!=null&&g.dirty)?9:-1),s(2),_("ngClass",C(15,w,!((u=e.orders.get("phone"))!=null&&u.errors)&&(((u=e.orders.get("phone"))==null?null:u.touched)||((u=e.orders.get("phone"))==null?null:u.dirty)),((u=e.orders.get("phone"))==null?null:u.errors)&&(((u=e.orders.get("phone"))==null?null:u.touched)||((u=e.orders.get("phone"))==null?null:u.dirty)))),s(3),c(14,(f=e.orders.get("city"))!=null&&f.errors&&((f=e.orders.get("city"))!=null&&f.touched||(f=e.orders.get("city"))!=null&&f.dirty)?14:-1),s(3),c(17,e.isLoading?17:-1),s(),c(18,e.errorMsg?18:-1),s(),c(19,e.successMsg?19:-1)}},dependencies:[D,A,q,F,N,I,R,z,M]});let t=o;return t})();export{ne as OrdersComponent};
